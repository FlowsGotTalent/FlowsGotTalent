import { resolve } from 'path';
import { exec } from 'child_process';

function execAsync(cmd, options) {
  return new Promise((fulfill, reject) => {
    const fullOptions = {
      ...options,
      encoding: "utf8"
    };
    if (fullOptions.cwd) {
      fullOptions.cwd = resolve(fullOptions.cwd);
    }
    exec(cmd, fullOptions, (error, stdout, stderr) => {
      if (error) {
        reject(error);
      } else {
        fulfill({
          stdout,
          stderr
        });
      }
    });
  });
}

export { execAsync };
